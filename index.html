<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>池州悦跑跑步打卡记录</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #3498db, #2ecc71);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .form-container {
            padding: 20px 30px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        
        .btn-success {
            background-color: #2ecc71;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .filter-controls {
            padding: 15px 30px;
            background-color: white;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .filter-select {
            padding: 8px 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            background-color: white;
            font-size: 0.95rem;
        }
        
        .table-container {
            overflow-x: auto;
            padding: 0 30px 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        th {
            background: linear-gradient(90deg, #3498db, #2ecc71);
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #e8f4fc;
        }
        
        .name-col {
            width: 120px;
        }
        
        .date-col {
            width: 120px;
        }
        
        .distance-col {
            width: 100px;
        }
        
        .time-col {
            width: 100px;
        }
        
        .pace-col {
            width: 100px;
        }
        
        .feeling-col {
            width: auto;
        }
        
        .time-type-col {
            width: 100px;
        }
        
        .feeling-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            display: inline-block;
        }
        
        .feeling-excellent {
            background-color: #e8f6f3;
            color: #27ae60;
        }
        
        .feeling-good {
            background-color: #eaf2f8;
            color: #2980b9;
        }
        
        .feeling-normal {
            background-color: #fef9e7;
            color: #f39c12;
        }
        
        .feeling-tired {
            background-color: #fdedec;
            color: #e74c3c;
        }
        
        .time-type-badge {
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
            text-align: center;
            min-width: 60px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .morning-run {
            background: linear-gradient(135deg, #ff9a00, #ff6a00);
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .night-run {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background-color: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .stat-card {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            text-align: center;
            min-width: 150px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #3498db;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .runner-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            padding: 20px;
            background-color: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }
        
        .runner-stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .runner-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .runner-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .runner-detail-label {
            color: #7f8c8d;
        }
        
        .runner-detail-value {
            font-weight: 600;
            color: #2c3e50;
        }
        
        footer {
            background: linear-gradient(90deg, #2c3e50, #34495e);
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.95rem;
        }
        
        .footer-text {
            margin-bottom: 5px;
        }
        
        .footer-slogan {
            font-style: italic;
            opacity: 0.8;
        }
        
        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 6px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .message.success {
            background-color: #2ecc71;
        }
        
        .message.error {
            background-color: #e74c3c;
        }
        
        .message.show {
            transform: translateX(0);
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .filter-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            th, td {
                padding: 10px 8px;
                font-size: 0.9rem;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
            }
            
            .runner-stats {
                grid-template-columns: 1fr;
            }
            
            .message {
                top: 10px;
                right: 10px;
                left: 10px;
                transform: translateY(-150%);
            }
            
            .message.show {
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>池州悦跑跑步打卡记录</h1>
            <p class="subtitle">共享跑步数据，追踪进步轨迹</p>
        </header>
        
        <div class="form-container">
            <h2 style="margin-bottom: 15px; color: #2c3e50;">添加跑步记录</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="runnerName">跑步者姓名</label>
                    <input type="text" id="runnerName" class="form-control" placeholder="请输入您的姓名">
                </div>
                <div class="form-group">
                    <label for="runDate">跑步日期</label>
                    <input type="date" id="runDate" class="form-control">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="runDistance">跑步里程 (km)</label>
                    <input type="number" id="runDistance" class="form-control" placeholder="例如：5.2" step="0.1" min="0">
                </div>
                <div class="form-group">
                    <label for="runTime">跑步时长 (分钟)</label>
                    <input type="number" id="runTime" class="form-control" placeholder="例如：28" min="0">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="runPace">跑步配速 (分钟/公里)</label>
                    <input type="text" id="runPace" class="form-control" placeholder="例如：5:30">
                </div>
                <div class="form-group">
                    <label for="runFeeling">跑步感受</label>
                    <select id="runFeeling" class="form-control">
                        <option value="精力充沛">精力充沛</option>
                        <option value="状态良好">状态良好</option>
                        <option value="正常" selected>正常</option>
                        <option value="有点疲惫">有点疲惫</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="runType">跑步时间</label>
                    <select id="runType" class="form-control">
                        <option value="晨跑">晨跑</option>
                        <option value="夜跑">夜跑</option>
                    </select>
                </div>
                <div class="form-group" style="display: flex; align-items: flex-end;">
                    <button id="addRecordBtn" class="btn btn-success" style="width: 100%;">
                        添加跑步记录
                    </button>
                </div>
            </div>
        </div>
        
        <div class="filter-controls">
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <select class="filter-select" id="runnerFilter">
                    <option value="all">所有跑步者</option>
                </select>
                <select class="filter-select" id="dateFilter">
                    <option value="all">所有日期</option>
                </select>
                <select class="filter-select" id="timeTypeFilter">
                    <option value="all">晨跑/夜跑</option>
                    <option value="晨跑">晨跑</option>
                    <option value="夜跑">夜跑</option>
                </select>
            </div>
        </div>
        
        <div class="table-container">
            <table id="runningTable">
                <thead>
                    <tr>
                        <th class="name-col">跑步者</th>
                        <th class="date-col">日期</th>
                        <th class="distance-col">里程 (km)</th>
                        <th class="time-col">时长 (分钟)</th>
                        <th class="pace-col">配速 (min/km)</th>
                        <th class="feeling-col">感受</th>
                        <th class="time-type-col">晨跑/夜跑</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- 表格数据将通过JavaScript动态生成 -->
                </tbody>
            </table>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalRuns">0</div>
                <div class="stat-label">总跑步次数</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalDistance">0 km</div>
                <div class="stat-label">总里程</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalTime">0 分钟</div>
                <div class="stat-label">总时长</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgPace">0:00</div>
                <div class="stat-label">平均配速</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalRunners">0</div>
                <div class="stat-label">参与人数</div>
            </div>
        </div>
        
        <div class="runner-stats" id="runnerStats">
            <!-- 个人统计数据将在这里动态生成 -->
        </div>
        
        <footer>
            <div class="footer-text">池州悦跑 © 2025</div>
            <div class="footer-slogan">健康生活，从跑步开始</div>
        </footer>
    </div>

    <div id="message" class="message"></div>

    <script>
        // 初始化跑步记录数据
        let runningRecords = JSON.parse(localStorage.getItem('runningRecords')) || [
            { runner: '张三', date: '2023-10-15', distance: 5.2, time: 28, pace: '5:23', feeling: '精力充沛', type: '晨跑' },
            { runner: '李四', date: '2023-10-15', distance: 4.8, time: 26, pace: '5:25', feeling: '状态良好', type: '夜跑' },
            { runner: '王五', date: '2023-10-16', distance: 3.8, time: 22, pace: '5:47', feeling: '正常', type: '晨跑' },
            { runner: '张三', date: '2023-10-17', distance: 7.5, time: 45, pace: '6:00', feeling: '有点疲惫', type: '夜跑' },
            { runner: '赵六', date: '2023-10-18', distance: 4.5, time: 27, pace: '6:00', feeling: '状态良好', type: '晨跑' },
            { runner: '李四', date: '2023-10-19', distance: 6.0, time: 33, pace: '5:30', feeling: '精力充沛', type: '夜跑' }
        ];

        // DOM元素
        const tableBody = document.getElementById('tableBody');
        const addRecordBtn = document.getElementById('addRecordBtn');
        const runnerFilter = document.getElementById('runnerFilter');
        const dateFilter = document.getElementById('dateFilter');
        const timeTypeFilter = document.getElementById('timeTypeFilter');
        const message = document.getElementById('message');

        // 显示消息函数
        function showMessage(text, type) {
            message.textContent = text;
            message.className = `message ${type}`;
            message.classList.add('show');
            
            setTimeout(() => {
                message.classList.remove('show');
            }, 3000);
        }

        // 保存数据到本地存储
        function saveData() {
            localStorage.setItem('runningRecords', JSON.stringify(runningRecords));
        }

        // 渲染表格
        function renderTable(records = runningRecords) {
            tableBody.innerHTML = '';
            
            records.forEach(record => {
                const row = document.createElement('tr');
                
                // 根据感受设置样式类
                let feelingClass = 'feeling-normal';
                if (record.feeling === '精力充沛') feelingClass = 'feeling-excellent';
                else if (record.feeling === '状态良好') feelingClass = 'feeling-good';
                else if (record.feeling === '有点疲惫') feelingClass = 'feeling-tired';
                
                // 根据跑步时间设置样式类
                const timeTypeClass = record.type === '夜跑' ? 'night-run' : 'morning-run';
                
                row.innerHTML = `
                    <td>${record.runner}</td>
                    <td>${record.date}</td>
                    <td>${record.distance}</td>
                    <td>${record.time}</td>
                    <td>${record.pace}</td>
                    <td><span class="feeling-badge ${feelingClass}">${record.feeling}</span></td>
                    <td><span class="time-type-badge ${timeTypeClass}">${record.type}</span></td>
                `;
                
                tableBody.appendChild(row);
            });
            
            updateStats(records);
            updateRunnerStats(records);
        }

        // 更新筛选器选项
        function updateFilters() {
            // 更新跑步者筛选器
            const runners = [...new Set(runningRecords.map(record => record.runner))];
            const currentRunner = runnerFilter.value;
            
            runnerFilter.innerHTML = '<option value="all">所有跑步者</option>';
            runners.forEach(runner => {
                const option = document.createElement('option');
                option.value = runner;
                option.textContent = runner;
                runnerFilter.appendChild(option);
            });
            
            if (runners.includes(currentRunner)) {
                runnerFilter.value = currentRunner;
            }
            
            // 更新日期筛选器
            const dates = [...new Set(runningRecords.map(record => record.date))];
            const currentDate = dateFilter.value;
            
            dateFilter.innerHTML = '<option value="all">所有日期</option>';
            dates.forEach(date => {
                const option = document.createElement('option');
                option.value = date;
                option.textContent = date;
                dateFilter.appendChild(option);
            });
            
            if (dates.includes(currentDate)) {
                dateFilter.value = currentDate;
            }
            
            applyFilters();
        }

        // 应用筛选
        function applyFilters() {
            const selectedRunner = runnerFilter.value;
            const selectedDate = dateFilter.value;
            const selectedTimeType = timeTypeFilter.value;
            
            const filteredRecords = runningRecords.filter(record => {
                const runnerMatch = selectedRunner === 'all' || record.runner === selectedRunner;
                const dateMatch = selectedDate === 'all' || record.date === selectedDate;
                const timeTypeMatch = selectedTimeType === 'all' || record.type === selectedTimeType;
                
                return runnerMatch && dateMatch && timeTypeMatch;
            });
            
            renderTable(filteredRecords);
        }

        // 更新统计数据
        function updateStats(records) {
            const totalRuns = records.length;
            const totalDistance = records.reduce((sum, record) => sum + record.distance, 0);
            const totalTime = records.reduce((sum, record) => sum + record.time, 0);
            const runners = [...new Set(records.map(record => record.runner))];
            
            // 计算平均配速
            let totalPaceSeconds = 0;
            records.forEach(record => {
                const [minutes, seconds] = record.pace.split(':').map(Number);
                totalPaceSeconds += (minutes * 60 + seconds) * record.distance;
            });
            
            let avgPace = '0:00';
            if (totalDistance > 0) {
                const avgPaceSeconds = totalPaceSeconds / totalDistance;
                const avgMinutes = Math.floor(avgPaceSeconds / 60);
                const avgSeconds = Math.round(avgPaceSeconds % 60);
                avgPace = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            }
            
            // 更新统计卡片
            document.getElementById('totalRuns').textContent = totalRuns;
            document.getElementById('totalDistance').textContent = totalDistance.toFixed(1) + ' km';
            document.getElementById('totalTime').textContent = Math.round(totalTime) + ' 分钟';
            document.getElementById('avgPace').textContent = avgPace;
            document.getElementById('totalRunners').textContent = runners.length;
        }

        // 更新个人统计数据
        function updateRunnerStats(records) {
            const runnersData = {};
            
            // 收集每个跑步者的数据
            records.forEach(record => {
                if (!runnersData[record.runner]) {
                    runnersData[record.runner] = {
                        runs: 0,
                        totalDistance: 0,
                        totalTime: 0,
                        totalPaceSeconds: 0
                    };
                }
                
                runnersData[record.runner].totalDistance += record.distance;
                runnersData[record.runner].totalTime += record.time;
                
                // 配速（转换为秒）
                const [minutes, seconds] = record.pace.split(':').map(Number);
                runnersData[record.runner].totalPaceSeconds += (minutes * 60 + seconds) * record.distance;
                
                runnersData[record.runner].runs++;
            });
            
            // 生成个人统计卡片
            const runnerStats = document.getElementById('runnerStats');
            runnerStats.innerHTML = '';
            
            for (const [runner, data] of Object.entries(runnersData)) {
                // 计算平均配速
                let avgPace = '0:00';
                if (data.totalDistance > 0) {
                    const avgPaceSeconds = data.totalPaceSeconds / data.totalDistance;
                    const avgMinutes = Math.floor(avgPaceSeconds / 60);
                    const avgSeconds = Math.round(avgPaceSeconds % 60);
                    avgPace = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
                }
                
                const card = document.createElement('div');
                card.className = 'runner-stat-card';
                card.innerHTML = `
                    <div class="runner-name">${runner}</div>
                    <div class="runner-detail">
                        <span class="runner-detail-label">跑步次数:</span>
                        <span class="runner-detail-value">${data.runs}</span>
                    </div>
                    <div class="runner-detail">
                        <span class="runner-detail-label">总里程:</span>
                        <span class="runner-detail-value">${data.totalDistance.toFixed(1)} km</span>
                    </div>
                    <div class="runner-detail">
                        <span class="runner-detail-label">总时长:</span>
                        <span class="runner-detail-value">${Math.round(data.totalTime)} 分钟</span>
                    </div>
                    <div class="runner-detail">
                        <span class="runner-detail-label">平均配速:</span>
                        <span class="runner-detail-value">${avgPace}</span>
                    </div>
                `;
                runnerStats.appendChild(card);
            }
        }

        // 添加新的跑步记录
        addRecordBtn.addEventListener('click', function() {
            const runnerName = document.getElementById('runnerName').value.trim();
            const runDate = document.getElementById('runDate').value;
            const runDistance = parseFloat(document.getElementById('runDistance').value);
            const runTime = parseFloat(document.getElementById('runTime').value);
            const runPace = document.getElementById('runPace').value.trim();
            const runFeeling = document.getElementById('runFeeling').value;
            const runType = document.getElementById('runType').value;
            
            // 验证输入
            if (!runnerName) {
                showMessage('请输入跑步者姓名', 'error');
                return;
            }
            
            if (!runDate) {
                showMessage('请选择跑步日期', 'error');
                return;
            }
            
            if (!runDistance || runDistance <= 0) {
                showMessage('请输入有效的跑步里程', 'error');
                return;
            }
            
            if (!runTime || runTime <= 0) {
                showMessage('请输入有效的跑步时长', 'error');
                return;
            }
            
            if (!runPace || !runPace.includes(':')) {
                showMessage('请输入有效的配速，格式为"分钟:秒"', 'error');
                return;
            }
            
            // 创建新记录
            const newRecord = {
                runner: runnerName,
                date: runDate,
                distance: runDistance,
                time: runTime,
                pace: runPace,
                feeling: runFeeling,
                type: runType
            };
            
            // 添加到数据数组
            runningRecords.push(newRecord);
            
            // 保存到本地存储
            saveData();
            
            // 重新渲染表格和筛选器
            renderTable();
            updateFilters();
            
            // 清空表单
            document.getElementById('runnerName').value = '';
            document.getElementById('runDate').value = '';
            document.getElementById('runDistance').value = '';
            document.getElementById('runTime').value = '';
            document.getElementById('runPace').value = '';
            document.getElementById('runFeeling').value = '正常';
            document.getElementById('runType').value = '晨跑';
            
            showMessage('跑步记录添加成功！', 'success');
        });

        // 筛选器事件监听
        runnerFilter.addEventListener('change', applyFilters);
        dateFilter.addEventListener('change', applyFilters);
        timeTypeFilter.addEventListener('change', applyFilters);

        // 初始化页面
        function initPage() {
            // 设置默认日期为今天
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('runDate').value = formattedDate;
            
            // 渲染表格和筛选器
            renderTable();
            updateFilters();
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>